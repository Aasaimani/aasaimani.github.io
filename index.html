<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Aasaimani Thamizhazhagan</title>
 <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']], // Enable $...$ and \( ... \)
        processEscapes: true // Allow \$ to escape dollar signs
      },
      svg: { fontCache: 'global' } // Use SVG output
    };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js" async></script>
<style>
/* ===== H2 Accent: Teal / Cyan Mix (dark-friendly) ===== */
:root{
  --accent-dark: #0f3f46; /* deep teal */
  --accent-dark-2: #146d77; /* brighter cyan-teal */
  --accent-soft-dark: rgba(20,109,119,0.20);
  --bg-dark: #071018;
  --card-dark: rgba(255,255,255,0.03);
  --text-dark: #eaf2ff;
  --external-link-dark: #ffb34d;
  --external-link-hover-dark: #ffd08a;
}

body[data-theme="dark"]{
  --bg: var(--bg-dark);
  --card: var(--card-dark);
  --text: var(--text-dark);
  --accent: var(--accent-dark-2);
  --accent-soft: var(--accent-soft-dark);
  --external-link: var(--external-link-dark);
  --external-link-hover:  var(--external-link-dark-hover);
  background: linear-gradient(180deg,#041018 0%, #071018 100%);
  color: var(--text);
}

/* light theme matching colors */
body[data-theme="light"]{
  --bg: #f6f8fb;
  --card: rgba(255,255,255,0.96);
  --text: #0f1720;
  --accent: #008b74; /* matches H2 suggestion for light */
  --accent-soft: rgba(0,139,116,0.18);
  --external-link: #cc5500;
  --external-link-hover: #e67622;
  background: linear-gradient(180deg,#fafbfd 0%, #eef2f8 100%);
  color: var(--text);
}

/* base */
*{box-sizing:border-box}
html,body{height:100%; margin:0; font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial;}
a{color:var(--accent); text-decoration:none}
button{font-family:inherit; cursor:pointer}

 /* blurred header clone */
.header-blur-clone {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--header-height, 260px); /* set this to your header‚Äôs height */
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
  pointer-events: none;
  opacity: 0;
  background: transparent;
  transition: opacity .25s ease;
  z-index: 9998; /* below cards but above background */
}

/* header */
.header{
  position:relative;
  top:0;
  z-index:1;
  padding:14px 18px;

  /* blur background behind header */
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);

  /* keep header translucent so blur can show through */
  background: rgba(0,0,0,0.15);

  border-bottom:1px solid rgba(255,255,255,0.08);
 transition: opacity .25s ease;
}

body[data-theme="light"] .header{
  background: rgba(255,255,255,0.55);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border-bottom:1px solid rgba(0,0,0,0.06);
}

.header-inner{
  max-width:1100px; margin:auto;
  display:grid; grid-template-columns:220px 1fr 320px; gap:18px; align-items:center; flex-wrap:wrap;
}

/* left: portrait */
.header-photo img{
  width:200px; height:200px; object-fit:cover; border-radius:12px; border:3px solid var(--accent); box-shadow:0 10px 30px rgba(0,0,0,0.25);
}

/* center */
.header-center{ display:flex; flex-direction:column; align-items:center; gap:6px; text-align:center; min-width:0; }
.name-row{ display:flex; align-items:center; gap:8px; }
.site-title{ margin:0; font-size:1.5rem; font-weight:700; color:var(--text); }
.menu-minimal{ display:none; font-size:1.6rem; background:none; border:none; color:var(--accent); opacity:0.75; padding:0 6px; }
.title-block .tagline{ color:var(--accent); font-weight:600; font-size:0.98rem; }

/* menu row (nav + theme) */
.menu-row{ margin-top:8px; display:flex; gap:10px; align-items:center; flex-wrap:wrap; }

/* nav */
.main-nav{ display:flex; gap:16px; align-items:center; transition:all .28s ease; }
.main-nav a{ padding:8px 10px; border-radius:8px; color:var(--accent); font-weight:600; }
.main-nav a:hover{ background: rgba(255,255,255,0.02) }

/* theme button */
.theme-btn{ padding:8px 10px; border-radius:8px; background:var(--card); border:1px solid rgba(0,0,0,0.06); color:var(--text); }

/* right: epicycle */
.header-epicycle{ display:flex; justify-content:flex-end; align-items:center; }
.epicycle-canvas{ width:320px; height:160px; border-radius:10px; background:transparent; }

/* waveform under header */
.waveform{ height:34px; width:100%; margin-top:10px; background: linear-gradient(90deg, rgba(255,255,255,0.10), rgba(255,255,255,0.02)); border-radius:8px; }

/* container + cards */
.container{ max-width:980px; margin:20px auto; padding:16px; }
.page-section{ display:none; opacity:0; transform:translateY(6px); transition: opacity .28s ease, transform .28s ease; }
.page-section.active{ display:block; opacity:1; transform:none; }
.card{ position: relative; z-index: 10; background:var(--card); padding:18px; border-radius:12px; box-shadow: 0 8px 24px rgba(2,8,20,0.24); border:1px solid rgba(255,255,255,0.02); }

/* course UI */
/* .course-list{ display:flex; gap:10px; flex-wrap:wrap; margin-bottom:12px; }
.course-btn{ padding:8px 8px; border-radius:9px; background:transparent; border:1px solid var(--accent); color:var(--accent); font-weight:700; cursor:pointer; }
.course-btn:hover{ background:var(--accent); color:var(--bg); } */

/* course content */
/* .course-content h3{ margin-top:8px; }
.grid-list{ display:grid; gap:10px; grid-template-columns: repeat(auto-fit,minmax(140px,1fr)); margin-top:12px; }
.lecture-link{ padding:10px; display:block; border-radius:10px; text-align:center; background: rgba(255,255,255,0.02); color:var(--text); font-weight:700; border:1px solid rgba(255,255,255,0.03); text-decoration:none; }
.lecture-link:hover{ color:var(--accent); border-color:var(--accent); transform:translateY(-3px); transition:transform .12s; } */

 /* ----------------------------------------
   ACCORDION ‚Äî matches your website theme
----------------------------------------- */

.teaching-accordion {
  border-radius: 12px;
  background: var(--card);
  border: 1px solid var(--accent-soft);
  margin-bottom: 18px;
  overflow: hidden;
  transition: background 0.3s ease;
}

/* Heading of each University block */
.teaching-accordion-header {
  padding: 14px 18px;
  cursor: pointer;
  font-weight: 600;
  color: var(--accent);
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid var(--accent-soft);
  background: linear-gradient(
    90deg,
    var(--accent-soft) 0%,
    transparent 70%
  );
}

.teaching-accordion-header:hover {
  background: var(--accent-soft);
}

.teaching-accordion-header svg {
  width: 18px; height: 18px;
  transition: transform 0.25s ease;
  opacity: 0.85;
}

/* content slides down */
.teaching-accordion-content {
  display: none;
  padding: 16px 20px;
  animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
  from { opacity:0; transform: translateY(-4px); }
  to   { opacity:1; transform: translateY(0px); }
}

/* Course buttons */
.course-btn {
  display: block;
  width: 100%;
  text-align: left;
  margin: 6px 0;
  padding: 10px 12px;
  background: var(--card);
  border: 1px solid var(--accent-soft);
  border-radius: 8px;
  cursor: pointer;
  color: var(--text);
  transition: background 0.25s ease, border-color 0.25s ease;
}

.course-btn:hover {
  background: var(--accent-soft);
  border-color: var(--accent);
}

/* Modules */
.modules-list button {
  margin: 4px;
  padding: 6px 10px;
  border-radius: 6px;
  border: 1px solid var(--accent-soft);
  background: var(--card);
  color: var(--text);
  cursor: pointer;
}

.modules-list button:hover {
  background: var(--accent-soft);
  border-color: var(--accent);
}

/* Lecture grid */
.grid-list {
  margin-top: 10px;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
  gap: 10px;
}

.grid-list a {
  padding: 6px 8px;
  text-decoration: none;
  color: var(--accent);
  border: 1px dashed var(--accent-soft);
  border-radius: 6px;
  background: var(--card);
}

.grid-list a:hover {
  background: var(--accent-soft);
  border-color: var(--accent);
}

 .empty-message {
  padding: 1rem;
  opacity: 0.7;
  font-style: italic;
}

/* mobile responsive */
@media (max-width:940px){ .header-inner{ grid-template-columns:180px 1fr 260px; } .epicycle-canvas{ width:260px; height:130px; } .header-photo img{ width:160px; height:160px; } }
@media (max-width:720px){
  .header-inner{ grid-template-columns: 1fr; justify-items:center; gap:12px; }
  .header-photo img{ width:140px; height:140px; border-radius:12px; }
  .menu-minimal{ display:inline-block; }         /* show ‚ãÆ by name */
  .main-nav{ display:none; }                     /* hide desktop nav on mobile */
  .main-nav.expanded{ display:flex; flex-direction:column; gap:8px; width:100%; background:var(--card); padding:10px; border-radius:10px; margin-top:6px; }
  .menu-row{ width:100%; justify-content:center; }
  .epicycle-canvas{ width:90%; max-width:360px; height:120px;}
}

/* mobile overlay menu (three-dots) */
.mobile-menu{
  display:none;
  position:fixed; right:12px; top:30px; z-index:1500;
  background:var(--card); padding:10px; border-radius:10px; box-shadow:0 8px 30px rgba(0,0,0,0.35);
}
.mobile-menu a{ display:block; padding:8px 10px; color:var(--text); text-decoration:none; border-bottom:1px solid rgba(255,255,255,0.02); }
.mobile-menu a:last-child{ border-bottom:none; }

 .social-icons {
  margin: 0.8rem 0;
  font-size: 1.7rem;
  display: flex;
  gap: 1rem;
}

.social-icons img {
    height: 26px;
    vertical-align: middle;
  }
  .social-icons a {
    margin-right: 12px;
  }

/* External links: any link beginning with http and NOT your domain */
a[href^="http"]:not([href*="aasaimani.github.io"]) {
  color: var(--external-link);
  border-bottom: 1px dashed var(--external-link);
}

a[href^="http"]:not([href*="aasaimani.github.io"]):hover {
  color: var(--external-link-hover);
  border-bottom-color: var(--external-link-hover);
}

  /* footer */
.footer{ text-align:center; padding:14px 0; color:var(--text);  margin-bottom: 10px; }

 /* Apply vertical spacing between list items */
ol li {
    margin-bottom: 10px; /* space below each item */
}

/* Optional: remove space after the last item */
ol li:last-child {
    margin-bottom: 0;
}

 .contact-card {
  padding: 32px;
  border-radius: 20px;
}

.section-title {
  font-size: 2rem;
  margin-bottom: 12px;
  color: var(--accent);
}

.section-desc {
  margin-bottom: 24px;
  color: var(--text);
}

/* Card items inside the contact section */
.contact-item {
  display: flex;
  gap: 16px;
  padding: 20px;
  margin-bottom: 20px;
  border-radius: 16px;
  background: var(--card);
}

.contact-item .icon {
  flex-shrink: 0;
  display: flex;
  align-items: flex-start;
  padding-top: 4px;
}

.contact-item .info h3 {
  margin-bottom: 6px;
  color: var(--accent);
}

.email-link {
  color: var(--accent);
  font-weight: 500;
  text-decoration: underline;
}

.email-link:hover {
  color: var(--external-link-hover);
}

</style>
</head>
<body data-theme="dark">

<header class="header" role="banner">
 <div class="header-blur-clone"></div>
  <div class="header-inner">

    <!-- LEFT: portrait -->
    <div class="header-photo">
      <img src="Aasai_2.JPEG" alt="Portrait of X" width="200" height="200">
    </div>
   

    <!-- CENTER: title + tagline + menu -->
    <div class="header-center">
      <div class="name-row">
        <h1 class="site-title">Aasaimani Thamizhazhagan</h1>
       <button id="mobileDots" class="menu-minimal" aria-label="Open menu">‚ñ¶</button>
      </div>

      <div class="title-block">
        <div class="tagline">Harmonic Analysis ¬∑ Groups ¬∑ Duality</div>
      </div>

     <div class="social-icons" style="margin-top:10px;">
  <!-- ORCID -->
  <a href=" https://orcid.org/0009-0007-7553-4225" target="_blank" 
     title="ORCID">
    <img src="icons/ORCID-iD_icon_vector.svg" 
         alt="ORCID iD" 
         style="height:26px; margin-right:12px; vertical-align:middle;">
  </a>

  <!-- arXiv -->
  <a href=" http://arxiv.org/a/thamizhazhagan_a_1" target="_blank"
     title="arXiv Author Page">
    <img src="icons/arxiv-logomark-small.svg" 
         alt="arXiv" 
         style="height:26px; vertical-align:middle;">
  </a>
</div>
      <div class="menu-row">
        <nav id="mainNav" class="main-nav" aria-label="Primary navigation">
          <a href="#about">About</a>
          <a href="#research">Research</a>
          <a href="#teaching">Teaching</a>
          <!-- <a href="#modules">Modules</a> -->
          <a href="#contact">Contact</a>
        </nav>

         <!-- menu button stays in header but drawer appears OUTSIDE -->
  <!-- <button id="menu-toggle" aria-label="Menu">&#9776;</button> -->
        
        <button id="themeToggle" class="theme-btn" aria-pressed="false" title="Toggle theme">Theme</button>
      </div>
    </div>

    <!-- RIGHT: epicycle -->
    <div class="header-epicycle">
      <canvas id="epicycle" class="epicycle-canvas" aria-hidden="true"></canvas>
    </div>
 <!-- mobile overlay menu (shown when ‚ãÆ clicked) -->
  <div id="mobileMenu" class="mobile-menu" aria-hidden="true">
    <a href="#about">About</a>
    <a href="#research">Research</a>
    <a href="#teaching">Teaching</a>
    <!-- <a href="#modules">Modules</a> -->
    <a href="#contact">Contact</a>
  </div>
  </div>
</header>
  <!-- <div class="waveform" aria-hidden="true"></div> -->

  


<!-- ========== MAIN CONTENT ========== -->
<main class="container" id="content" role="main">
  <section id="about" class="page-section active">
    <div class="card">
      <h2>About</h2>
      <p>Since October 2024, I have been serving as a Guest Faculty in the Department of Mathematics at Pondicherry University, 
   teaching foundational mathematics courses to engineering students. My academic journey includes two years 
    as a Postdoctoral Fellow at University of Waterloo, Canada, where I also earned my Ph.D. in 2021 under the 
    guidance of Professors <a href="https://www.math.uwaterloo.ca/~nspronk/">Dr. Nico Spronk</a> and <a href="https://www.math.uwaterloo.ca/~beforres/">Dr. Brian Forrest</a>. 
      Just before that fellowship, I spent a year as a Postdoctoral Fellow at University of Winnipeg, Canada, working with Professors <a href="https://www.uwinnipeg.ca/mathstats/faculty/ross-stokke.html">Dr. Ross Stokke</a> and <a href="https://www.uwinnipeg.ca/mathstats/faculty/matthew-wiersma.html">Dr. Matthew Wiersma</a>.
    I began my research career with an integrated master‚Äôs degree from National Institute of Science 
    Education and Research Bhubaneswar, India, under the supervision of Professor <a href="https://iitpkd.ac.in/people/vmuruganandam">Dr. Varadharajan Muruganandam</a>
</p>
    </div>
  </section>

  <section id="research" class="page-section">
    <div class="card">
      <h2>Research</h2>
      <p>My work lives where abstract harmonic analysis, Banach algebra theory, and operator-space/operator-algebra techniques meet. The classical objects ‚Äî Fourier and Fourier‚ÄìStieltjes algebras ‚Äî
        reveal how a group looks ‚Äúthrough the eyes of its unitary representations.‚Äù In recent decades, operator-space theory and the language of completely bounded maps have deepened this perspective,
        enriching those classical algebras by embedding them into operator algebras on Hilbert space.</p>

      <p>Through this lens, my research explores how classical harmonic-analysis phenomena extend and transform when viewed inside the operator-space framework ‚Äî shedding light on both the algebraic 
        and analytic aspects of group representations, operator algebras, and non-commutative analysis.</p>
    </div>
    <div class="card">
    <h2>Publications</h2>
      <ol>
        <li>(with Brian E. Forrest and John Sawatzky) <it>Arens regularity of ideals in $A(G)$, $A_{cb}(G)$ and $A_M(G)$</it>, Journal of the Iranian Mathematical Society <b>4</b> (2023), no. 1, 5--25. 
         <a href="https://mathscinet.ams.org/mathscinet-getitem?mr=4614855" target=_blank>MR 4614855</a> ¬∑ <a href="https://arxiv.org/abs/2302.05699">arXiv:2302.05699</a> ¬∑ 
         <a href="https://doi.org/10.30504/jims.2023.385500.1091">DOI: 10.30504/jims.2023.385500.1091</a></li>
       <li>(with Brian E. Forrest and John Sawatzky) <it>Invariant subspaces in the dual of $A_{cb}(G)$ and $A_M(G)$</it>, Annals of Mathematical Sciences and Applications <b>8</b> (2023), no. 2, 239‚Äì-267.
        <a href="https://mathscinet.ams.org/mathscinet-getitem?mr=4626916">MR 4626916</a> ¬∑ <a href="https://arxiv.org/abs/2304.06195">arXiv:2304.06195</a> ¬∑ 
        <a href="https://dx.doi.org/10.4310/AMSA.2023.v8.n2.a3">DOI: 10.4310/AMSA.2023.v8.n2.a3</a></li>
       <li><it>On the structure of invertible elements in certain Fourier-Stieltjes algebras</it>, Studia Mathematica, <b>257</b> (2021), no. 3, 347--360.
        <a href="https://mathscinet.ams.org/mathscinet-getitem?mr=4201439">MR 4201439</a> ¬∑ <a href="https://arxiv.org/abs/2001.08294">arXiv:2001.08294</a> ¬∑ <a href="https://doi.org/10.4064/sm200122-12-5">DOI: 10.4064/sm200122-12-5</a></li>
      </ol>
    </div> 
  </section>

  <section id="teaching" class="page-section">
<div class="card">
   <h2>Current Teaching</h2>
<div class="teaching-block" data-source="current"></div>
</div>

<div class="card">   
<h2>Past Teaching</h2>
<div class="teaching-block" data-source="past"></div>
</div>
    <!-- <div class="card">
      <h2>Current Teaching</h2>
  
     <div>
      <button class="course-btn" data-course="btmt171" data-path="modules/BTMT171PUOdd25" data-lectures="3" data-assignments="4" data-text="Lecture">Mathematics I for Engineers (Odd 2025)</button>
     </div>

    </div>
    <div class="card">
      <h2>Past Teaching</h2>
   
    <div id="course-list" class="course-list">
   
     
      <p>At University of Waterloo</p>
     <div>
        <button class="course-btn" data-course="ece206" data-path="modules/ECE206UWFall23" data-lectures="23" data-assignments="0" data-text="Lecture">Adv. Calc. 2 for ECE (Fall 2023)</button>

        <button class="course-btn" data-course="math137" data-path="modules/MATH137UWFall22" data-lectures="11" data-assignments="0" data-text="Lecture">Calculus I for Honours Math (Fall 2022)</button>

        <button class="course-btn" data-course="math116" data-path="courses/LA2022" data-lectures="0" data-assignments="0" data-text="Lecture">Calculus for Engineering (Fall 2019)</button>
      </div>

      <div id="course-content" class="course-content" aria-live="polite"></div>
    </div>
    </div> -->
  </section>

  <!-- <section id="modules" class="page-section">
    <div class="card">
      <h2>Modules ‚Äî Advanced Calculus 2 for Electrical Engineers</h2>
      <p>Lecture notes for the course.</p>
      <div id="haa-lectures" data-path="modules/ECE206UWFall23" class="grid-list" aria-live="polite"></div>
    </div>
  </section> -->

  <section id="contact" class="page-section">
 <div class="card contact-card">

    <h2 class="section-title">Contact</h2>
    <p class="section-desc">
      Feel free to reach out anytime. You can email me directly or find my address below.
    </p>

    <!-- Email Card -->
    <div class="contact-item card">
      <div class="icon">
        <!-- email icon -->
        <svg width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
          <polyline points="22,6 12,13 2,6"/>
        </svg>
      </div>

      <div class="info">
        <h3>Email</h3>
        <a href="mailto:aasaimanit@pondiuni.ac.in" class="email-link">
         aasaimanit@pondiuni.ac.in
         </a><br> 
        <a href="mailto:fmanimic@gmail.com" class="email-link">
          fmanimic@gmail.com
        </a><br>
      </div>
    </div>

    <!-- Address Card -->
    <div class="contact-item card">
      <div class="icon">
        <!-- location icon -->
        <svg width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 10c0 7-9 13-9 13S3 17 3 10a9 9 0 1 1 18 0z"/>
          <circle cx="12" cy="10" r="3"/>
        </svg>
      </div>

      <div class="info">
        <h3>Address</h3>
        <p>
          M 05, <br>
          Ramanujan School of Mathematical Sciences<br>
          Pondicherry University<br>
          R Venkat Raman Nagar,<br>
          Kalapet, Pondicherry - 605 014, India
        </p>
      </div>
    </div>
  
  </div>
</section>
  </section>
</main>

<footer class="footer" role="contentinfo">
  <div>¬© Aasaimani Thamizhazhagan ¬∑ <a href="Thamizhazhagan_Aasaimani_CV_2026.pdf" target="_blank" rel="noopener">CV</a> ¬∑ ëÄÜëÄòëÅÉëÄ´ëÄ°ëÄ∫ ëÄ¢ëÄ´ëÄ∫ëÄµëÄµëÄìëÄ∑ëÅÜ</div>
</footer>

<!-- ========== SCRIPTS: UI + Epicycle ========== -->
<script>
/* ---------- UI: nav, sections, mobile menu, theme ---------- */
(function(){
  const body = document.body;
  const mainNav = document.getElementById('mainNav');
  const navLinks = Array.from(document.querySelectorAll('#mainNav a'));
  const pageSections = Array.from(document.querySelectorAll('.page-section'));
  const mobileDots = document.getElementById('mobileDots');
  const mobileMenu = document.getElementById('mobileMenu');
  const themeToggle = document.getElementById('themeToggle');

  // show only About on load
  function showSectionById(id){
    pageSections.forEach(s => s.classList.remove('active'));
    const el = document.getElementById(id);
    if(el) el.classList.add('active');
  }
  showSectionById('about');

  // desktop nav clicking: show section, hide mobile overlay
  navLinks.forEach(a => {
    a.addEventListener('click', (e) => {
      e.preventDefault();
      const id = a.getAttribute('href').slice(1);
      window.location.hash = id;
      showSectionById(id);
      // if mobile overlay open, close it
      mobileMenu.style.display = 'none';
      if(window.innerWidth <= 720){
        mainNav.classList.remove('expanded');
      }
      window.scrollTo({top:0, behavior:'smooth'});
    });
  });

  // menu ‚ãÆ (mobile) toggle
  mobileDots.addEventListener('click', (e) => {
    e.stopPropagation();
    // toggle mobile-menu element (overlay)
    if(mobileMenu.style.display === 'block') mobileMenu.style.display = 'none';
    else mobileMenu.style.display = 'block';
  });
  // clicking outside closes mobile menu
  document.addEventListener('click', (e) => {
    if(window.innerWidth <= 720){
      if(mobileMenu && !mobileMenu.contains(e.target) && e.target !== mobileDots){
        mobileMenu.style.display = 'none';
      }
    }
  });

 document.querySelectorAll('a[href^="http"]:not([href*="index.html"])')
  .forEach(link => {
    link.target = "_blank";
    link.rel = "noopener noreferrer";
  });


  // theme toggle (button)
  themeToggle.addEventListener('click', () => {
    const current = body.getAttribute('data-theme') || 'dark';
    const next = current === 'dark' ? 'light' : 'dark';
    body.setAttribute('data-theme', next);
    themeToggle.setAttribute('aria-pressed', String(next==='light'));
    // update tagline glow color when theme changes (epicycle updates it too)
    applyTaglineGlow();
  });

  // on resize ensure desktop nav visible
  function adjustNavOnResize(){
    if(window.innerWidth > 720){
      mainNav.style.display = 'flex';
      mainNav.classList.remove('collapsed');
      mainNav.classList.add('expanded');
    } else {
      mainNav.style.display = '';
      mainNav.classList.remove('expanded');
      mainNav.classList.add('collapsed');
    }
  }
  window.addEventListener('resize', adjustNavOnResize);
  adjustNavOnResize();

  // fill mobileMenu links (clone main nav)
  (function fillMobileMenu(){
    if(!mobileMenu) return;
    mobileMenu.innerHTML = '';
    navLinks.forEach(a=>{
      const link = a.cloneNode(true);
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const id = link.getAttribute('href').slice(1);
        showSectionById(id);
        mobileMenu.style.display = 'none';
        window.scrollTo({top:0, behavior:'smooth'});
      });
      mobileMenu.appendChild(link);
    });
  })();

 
  /* helper shading for tagline glow - initial */
  function applyTaglineGlow(){
    const tagline = document.querySelector('.tagline');
    if(!tagline) return;
    const accent = getComputedStyle(document.body).getPropertyValue('--accent').trim() || (body.getAttribute('data-theme')==='light' ? '#008b74' : '#66aaff');
    tagline.style.textShadow = `0 0 10px ${hexToRgba(accent,0.20)}, 0 0 18px ${hexToRgba(accent,0.06)}`;
  }
  // small hex->rgba
  function hexToRgba(hex, a){
    hex = hex.replace(/\s/g,'');
    if(hex.startsWith('rgb')) return hex;
    if(hex[0]==='#') {
      let h = hex.slice(1);
      if(h.length===3) h = h.split('').map(c=>c+c).join('');
      const v = parseInt(h,16);
      const r = (v>>16)&255, g=(v>>8)&255, b=v&255;
      return `rgba(${r},${g},${b},${a})`;
    }
    return hex;
  }
  applyTaglineGlow();

})();

/* ---------- TEACHING: course -> modules -> lectures ---------- */
// (function(){
//   const courseList = document.getElementById('course-list');
//   const courseContent = document.getElementById('course-content');

//   // When a course button clicked, show its modules
//   if(courseList && courseContent){
//     courseList.addEventListener('click', (e) => {
//       const btn = e.target.closest('.course-btn');
//       if(!btn) return;
//       const path = btn.dataset.path || '';
//       const lectures = parseInt(btn.dataset.lectures || '0',10);
//       const assignments = parseInt(btn.dataset.assignments || '0',10);
//       const baseText = btn.dataset.text || 'Lecture';
//       // Build modules listing (for simplicity: treat modules = weeks equal to lectures groups of 5)
//       const modules = Math.ceil(Math.max(lectures,1)/5);
//       let html = `<h3>${btn.textContent}</h3>`;
//       html += `<div class="modules-list">`;
//       for(let m=1;m<=modules;m++){
//         html += `<button class="module-btn" data-path="${path}" data-lectures="${lectures}" data-assignments="${assignments}" data-text="${baseText}" data-module="${m}">Module ${m}</button>`;
//       }
//       html += `</div>`;
//       html += `<div id="module-detail" class="module-detail"></div>`;
//       courseContent.innerHTML = html;

      // attach module click handlers
//       courseContent.querySelectorAll('.module-btn').forEach(mbtn=>{
//         mbtn.addEventListener('click', () => {
//           const module = parseInt(mbtn.dataset.module,10);
//           const total = parseInt(mbtn.dataset.lectures,10);
//           const assignments = parseInt(mbtn.dataset.assignments || '0');
//           const base = mbtn.dataset.path;
//           const text = mbtn.dataset.text || 'Lecture';
//           // compute range for this module: (m-1)*5+1 .. min(m*5,total)
//           const start = (module-1)*5 + 1;
//           const end = Math.min(module*5, total);
//           let detail = `<h4>Module ${module} ‚Äî Lectures ${start}‚Äì${end}</h4>`;
//           detail += `<div class="grid-list">`;
//           for(let i=start;i<=end;i++){
//             detail += `<a class="lecture-link" href="${base}/lecture${i}.pdf" target="_blank" rel="noopener noreferrer">${text} ${i}</a>`;
//           }
//           detail += `</div>`;
//           // assignments (if any) grouped by module
//           const assignTotal = parseInt(document.querySelector('.course-btn[data-path="'+base+'"]')?.dataset.assignments || '0',10);
//           if(assignTotal>0){
//             const astart = (module-1)*1 + 1;
//             const aend = Math.min(module*1, assignTotal);
//             if(astart<=aend){
//               detail += `<h4 style="margin-top:12px">Assignments</h4><div class="grid-list">`;
//               for(let a=astart;a<=aend;a++){
//                 detail += `<a class="lecture-link" href="${base}/assignment${a}.pdf" target="_blank" rel="noopener noreferrer">Assignment ${a}</a>`;
//               }
//               detail += `</div>`;
//             }
//           }
//           const md = document.getElementById('module-detail');
//           if(md) md.innerHTML = detail;
//           window.scrollTo({top:document.getElementById('course-content').offsetTop-20, behavior:'smooth'});
//         });
//       });
//     });
//   }
// })();

 /* ---------------------------------------------
   DUMMY TEACHING DATA (replace later if needed)
--------------------------------------------- */
const teachingData = {
  current: {
    "Pondicherry University": [
      {
        title: "Mathematics I for Engineers",
        path: "modules/BTMT171PUOdd2025",
        lectures: 0,
        assignments: 4,
        text: ""
      }
    ]
  },

  past: {
    "Pondicherry University": [
      {
        title: "Mathematics II for Engineers (Even 2025)",
        path: "",
        lectures: 0,
        assignments: 0,
        text: "Lecture"
      },
      {
        title: "Mathematics I for Engineers (Odd 2024)",
        path: "",
        lectures: 0,
        assignments: 0,
        text: ""
      }
    ],

    "University of Waterloo": [
      {
        title: "Advanced Calculus 2 for ECE",
        path: "modules/ECE206UWFall23",
        lectures: 23,
        assignments: 0,
        text: "Lecture"
      },
     {
        title: "Calculus I for Math Honors",
        path: "modules/MATH137UWFall22",
        lectures: 11,
        assignments: 0,
        text: "Lecture"
     },
      {
        title: "Calculus for Engineering",
        path: "modules/MATH116UWFall2019",
        lectures: 0,
        assignments: 0,
        text: "Lecture"
     }
    ],
   
   "University of Winnipeg": [
      {
        title: "Complex Analysis (Winter 2022)",
        path: "modules/MATH4101UWWinter22",
        lectures: 0,
        assignments: 10,
        text: "Lecture"
      },
     {
        title: "Applied Math for Business majors (Fall 2022)",
        path: "",
        lectures: 0,
        assignments: 0,
        text: "Lecture"
     }
    ]
  }
};


// ---------------------- MAIN COMPONENT ----------------------
function createTeachingComponent(container, groups) {
  let html = "";
  const univNames = Object.keys(groups);
  const singleUniversity = univNames.length === 1;

  // ----- Build Accordions -----
  univNames.forEach(univ => {
    let courseHTML = `<div class="course-list">`;

    groups[univ].forEach((course, i) => {
      courseHTML += `
        <button class="course-btn"
          data-university="${univ}"
          data-index="${i}"
        >${course.title.trim()}</button>
      `;
    });

    courseHTML += `<div class="course-content" data-university="${univ}"></div></div>`;

    const isOpen = singleUniversity ? 'style="display:block"' : '';

    html += `
      <div class="teaching-accordion">
        <div class="teaching-accordion-header">
          ${univ}
          <svg class="chevron" viewBox="0 0 24 24" 
               style="${singleUniversity ? 'transform:rotate(180deg)' : ''}">
            <path fill="currentColor" d="M7 10l5 5 5-5z"/>
          </svg>
        </div>
        <div class="teaching-accordion-content" ${isOpen}>${courseHTML}</div>
      </div>
    `;
  });

  container.innerHTML = html;


  // ------------------ ACCORDION TOGGLE ------------------
  container.querySelectorAll('.teaching-accordion-header').forEach(header => {
    header.addEventListener("click", () => {
      const content = header.nextElementSibling;
      const icon = header.querySelector(".chevron");
      const isOpen = content.style.display === "block";

      document.querySelectorAll(".teaching-accordion-content").forEach(c => {
        if (!c.closest('.teaching-block').isSameNode(container)) return;
        c.style.display = "none";
      });

      document.querySelectorAll(".chevron").forEach(c => {
        c.style.transform = "rotate(0deg)";
      });

      if (!isOpen) {
        content.style.display = "block";
        icon.style.transform = "rotate(180deg)";
      }
    });
  });



  // ------------------ COURSE CLICK ------------------
  container.addEventListener("click", (e) => {
    const btn = e.target.closest(".course-btn");
    if (!btn) return;

    const univ = btn.dataset.university;
    const index = Number(btn.dataset.index);
    const course = groups[univ][index];
    const courseContent = container.querySelector(
      `.course-content[data-university="${univ}"]`
    );

    const lectures = Number(course.lectures ?? 0);
    const assignments = Number(course.assignments ?? 0);

    // --- CASE 1: No content at all ---
    if (lectures === 0 && assignments === 0) {
      courseContent.innerHTML = `
        <h4>${course.title.trim()}</h4>
        <div class="empty-message">
          <p>No content available for this course.</p>
        </div>
      `;
      return;
    }

    // --- CASE 2: No lectures but assignments exist ---
    if (lectures === 0 && assignments > 0) {
      let out = `<h4>${course.title.trim()}</h4><div class="modules-list">`;

      // Each assignment becomes a "module"
      for (let a = 1; a <= assignments; a++) {
        out += `<button class="module-btn" data-module="${a}"><a href="${course.path}/assignment${a}.pdf" target="_blank">Assignment ${a}</a></button>`;
      }

      out += `</div><div class="module-detail"></div>`;
      courseContent.innerHTML = out;
      return;
    }

    // --- CASE 3: Normal case (lectures exist) ---
    const modules = Math.ceil(lectures / 5);

    let out = `<h4>${course.title.trim()}</h4><div class="modules-list">`;
    for (let m = 1; m <= modules; m++) {
      out += `<button class="module-btn" data-module="${m}">Module ${m}</button>`;
    }
    out += `</div><div class="module-detail"></div>`;

    courseContent.innerHTML = out;
  });



  // ------------------ MODULE CLICK ------------------
  container.addEventListener("click", (ev) => {
    const mbtn = ev.target.closest(".module-btn");
    if (!mbtn) return;

    const courseContent = mbtn.closest(".course-content");
    const univ = courseContent.dataset.university;

    const title = courseContent.querySelector("h4").textContent.trim();
    const course = groups[univ].find(c => c.title.trim() === title);

    const lectures = Number(course.lectures ?? 0);
    const assignments = Number(course.assignments ?? 0);
    const moduleNum = Number(mbtn.dataset.module);

    // ----- CASE A: Lectures exist -----
    if (lectures > 0) {
      const start = (moduleNum - 1) * 5 + 1;
      const end = Math.min(moduleNum * 5, lectures);

      let detail = `
        <h5>Module ${moduleNum} ‚Äî Lectures ${start}‚Äì${end}</h5>
        <div class="grid-list">
      `;

      for (let i = start; i <= end; i++) {
        detail += `
          <a href="${course.path}/lecture${i}.pdf" target="_blank">
            Lecture ${i}
          </a>`;
      }

      detail += `</div>`;

      // If assignments exist for this module
      if (moduleNum <= assignments) {
        detail += `
          <h5 style="margin-top:12px">Assignments</h5>
          <div class="grid-list">
            <a href="${course.path}/assignment${moduleNum}.pdf" target="_blank">
              Assignment ${moduleNum}
            </a>
          </div>`;
      }

      courseContent.querySelector(".module-detail").innerHTML = detail;
      return;
    }

    // ----- CASE B: No lectures, ONLY assignments -----
    // if (lectures === 0 && assignments > 0) {
    //   courseContent.querySelector(".module-detail").innerHTML = `
    //     <h5>Assignment ${moduleNum}</h5>
    //     <div class="grid-list">
    //       <a href="${course.path}/assignment${moduleNum}.pdf" target="_blank">
    //         Assignment ${moduleNum}
    //       </a>
    //     </div>
    //   `;
    // }
  });
}


// ---------------------- INIT ----------------------
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll(".teaching-block").forEach(block => {
    const source = block.dataset.source;
    createTeachingComponent(block, teachingData[source]);
  });
});

/* ---------- EPICYCLE: two intertwined circles + long fading tail + glow ---------- */
(function(){
  const canvas = document.getElementById('epicycle');
  if(!canvas || !canvas.getContext) return;
  const ctx = canvas.getContext('2d');

  function resizeCanvas(){
    const cssW = Math.min(window.innerWidth * 0.28, 360);
    const cssH = Math.round(cssW * 0.5);
    canvas.style.width = cssW + 'px';
    canvas.style.height = cssH + 'px';
    const ratio = window.devicePixelRatio || 1;
    canvas.width = Math.round(cssW * ratio);
    canvas.height = Math.round(cssH * ratio);
    ctx.setTransform(ratio,0,0,ratio,0,0);
  }
  window.addEventListener('resize', resizeCanvas);
  resizeCanvas();

  // parameters
  const harmonics = [
    {freq: 3, phase:3*Math.PI/4, rFactor:0.28},
    {freq: -2, phase:0, rFactor:0.18},
    // {freq: 5, phase:0, rFactor:0.10}, //Math.PI/2
    // {freq: -1, phase:3*Math.PI/4, rFactor:0.15}
  ];
  const trail = [];
  const maxTrail = 700;
  let time = 0;

  function getAccent(){
    return getComputedStyle(document.body).getPropertyValue('--accent').trim() || (document.body.getAttribute('data-theme')==='light' ? '#008b74' : '#66aaff');
  }
  function hexToRgba(hex, a){
    hex = hex.replace(/\s/g,'');
    if(hex.startsWith('rgb')) return hex;
    if(hex.startsWith('#')) {
      let h = hex.slice(1);
      if(h.length===3) h = h.split('').map(c=>c+c).join('');
      const v = parseInt(h,16);
      const r=(v>>16)&255, g=(v>>8)&255, b=v&255;
      return `rgba(${r},${g},${b},${a})`;
    }
    return hex;
  }

  function draw(){
    const W = canvas.clientWidth, H = canvas.clientHeight;
   // FIXED clearing
   ctx.clearRect(0,0,canvas.width, canvas.height);

    const cx = W*0.5, cy = H*0.5;
    const minDim = Math.min(W,H);
    // draw epicycles
    ctx.lineWidth = 1;
    ctx.strokeStyle = 'rgba(255,255,255,0.10)';
    let x = cx, y = cy;
    for(let i=0;i<harmonics.length;i++){
      const h = harmonics[i], r = h.rFactor * minDim;
      const ang = time * h.freq + (h.phase||0);
      const nx = x + r * Math.cos(ang);
      const ny = y + r * Math.sin(ang);
      // circle
      ctx.beginPath(); ctx.arc(x,y,r,0,Math.PI*2); ctx.stroke();
      // connector
      ctx.beginPath(); ctx.moveTo(x,y); ctx.lineTo(nx,ny); ctx.stroke();
      x = nx; y = ny;
    }

    // push trail
    trail.push({x,y});
    if(trail.length>maxTrail) trail.shift();

    const accent = getAccent();
    // draw trail with fading alpha
    for(let i=1;i<trail.length;i++){
      const p0 = trail[i-1], p1 = trail[i];
      const frac = i / trail.length;
      const alpha = Math.pow(frac, 0.9) * 0.95;
      ctx.strokeStyle = hexToRgba(accent, alpha);
      ctx.lineWidth = 2;
      ctx.beginPath(); ctx.moveTo(p0.x,p0.y); ctx.lineTo(p1.x,p1.y); ctx.stroke();
    }

    // endpoint dot + glow
    ctx.fillStyle = hexToRgba(accent,0.98);
    ctx.beginPath(); ctx.arc(x,y,3,0,Math.PI*2); ctx.fill();
    ctx.fillStyle = hexToRgba(accent,0.08);
    ctx.beginPath(); ctx.arc(x,y,14,0,Math.PI*2); ctx.fill();

    // update tagline glow too
    const tagline = document.querySelector('.tagline');
    if(tagline){
      tagline.style.textShadow = `0 0 12px ${hexToRgba(accent,0.18)}, 0 0 22px ${hexToRgba(accent,0.06)}`;
    }

    // advance time with slight scroll boost
    const scrollBoost = Math.min((window.pageYOffset||0)/20000, 0.04);
    time += 0.014 + scrollBoost;
    requestAnimationFrame(draw);
  }
  requestAnimationFrame(draw);
})();

  //fade the header when covered
//   window.addEventListener("scroll", () => {
//   if (window.scrollY > 80) {
//     document.querySelector("header").style.background =
//       "rgba(20,20,20,0.35)";
//   } else {
//     document.querySelector("header").style.background =
//       "rgba(20,20,20,0.55)";
//   }
// });


</script>
</body>
</html>
